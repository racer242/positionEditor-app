{"version":3,"sources":["reducers/mainReducer.js","components/TopMenu.js","actions/appActions.js","components/SideMenu.js","components/Editor.js","components/EditorPlace.js","core/Container.js","core/DataManager.js","core/Control.js","configuration/Settings.js","core/helpers.js","App.js","serviceWorker.js","index.js"],"names":["mainReducerController","state","action","type","addImagesTransform","concat","editorBounds","imageSize","addImagesDefaultSize","index","addImagesDefaultScale","width","height","justAdded","transform","data","loaded","mainReducer","extraAction","TopMenu","props","store","left_buttonHandler","bind","right_buttonHandler","this","unsubscribe","subscribe","onStoreChange","mounted","getState","setState","event","dispatch","children","push","id","key","className","title","style","left","onClick","right","React","createElement","Component","SideMenu","image_clickHandler","clear_buttonHandler","target","Number","substr","useImage","clearImage","addImagesSrc","i","length","imageSrc","top","src","Editor","currentZ","targetZs","targetRefs","moveableRefs","createRef","containerRef","movable_transformHandler","movable_transformEndHandler","prevProps","prevState","snapshot","params","exec","window","getComputedStyle","matrix","splice","updateImage","indexes","z","sort","a","b","ii","addImageTransform","ref","onLoad","onMouseDown","current","pinchThreshold","container","draggable","scalable","resizable","warpable","rotatable","pinchable","keepRatio","origin","throttleDrag","throttleRotate","throttleResize","throttleScale","onDrag","onResize","onScale","onWarp","onRotate","onPinch","onDragEnd","onScaleEnd","onResizeEnd","onWarpEnd","onRotateEnd","onPinchEnd","EditorPlace","editorRef","editorScale","editorX","editorY","updateBounds","clientWidth","clientHeight","lastWidth","lastHeight","bounds","Math","min","scale","mainImageSrc","Container","sideMenu","topMenu","DataManager","isLoading","isLoaded","loader","result","reloadData","saveStorageData","localStorageManager","load","setStorageData","save","Control","actionMap","appStartDelay","loadTimeout","setTimeout","app","onNext","onPrev","onSave","dataForStorageChanged","clearTimeout","stopTimeout","dataLoaded","loadDataError","reloadTimeout","settings","assetsUrl","localStoreName","isMobile","MobileDetect","navigator","userAgent","mobile","isLocal","test","document","location","toString","Store","createStore","__REDUX_DEVTOOLS_EXTENSION__","App","initHandler","resizeHandler","windowInnerWidth","documentElement","body","innerWidth","windowInnerHeight","innerHeight","windowWidth","windowHeight","updateLayout","setStoreData","addEventListener","onInit","Boolean","hostname","match","element","getElementById","console","log","getAttribute","ReactDOM","render","StrictMode","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.cf60e5be.chunk.js","sourcesContent":["let mainReducerController = (state={}, action) => {\r\n\r\n    // console.log(\"mainReducer\",action);\r\n\r\n    switch (action.type) {\r\n\r\n\r\n      case 'USE_IMAGE': {\r\n        let addImagesTransform=state.addImagesTransform.concat();\r\n        let editorBounds=state.editorBounds;\r\n        let imageSize=state.addImagesDefaultSize;\r\n        if (!addImagesTransform[action.index]) {\r\n          addImagesTransform[action.index]=[\r\n            state.addImagesDefaultScale, 0, 0, state.addImagesDefaultScale, (editorBounds.width-imageSize.width)/2, (editorBounds.height-imageSize.height)/2\r\n          ]\r\n        }\r\n        return {\r\n          ...state,\r\n          addImagesTransform,\r\n          justAdded:true,\r\n        }\r\n      }\r\n\r\n      case 'REINIT_MOVABLE': {\r\n        return {\r\n          ...state,\r\n          justAdded:false,\r\n        }\r\n      }\r\n\r\n      case 'CLEAR_IMAGE': {\r\n        let addImagesTransform=state.addImagesTransform.concat();\r\n        if (addImagesTransform[action.index]) {\r\n          addImagesTransform[action.index]=null;\r\n        }\r\n        return {\r\n          ...state,\r\n          addImagesTransform,\r\n        }\r\n      }\r\n\r\n      case 'UPDATE_IMAGE': {\r\n        let addImagesTransform=state.addImagesTransform.concat();\r\n        addImagesTransform[action.index]=action.transform;\r\n        // console.log(addImagesTransform);\r\n        return {\r\n          ...state,\r\n          addImagesTransform,\r\n        }\r\n      }\r\n\r\n      // case 'WAITING_FOR_RELOAD_STORE_DATA':\r\n      // case 'STORAGE_DATA_SAVED':\r\n      // case 'SAVE_STORAGE_DATA':\r\n      // case 'SET_STORAGE_DATA':\r\n      // case 'LOAD_STORE_DATA_ERROR':\r\n      // case 'RELOAD_STORE_DATA':\r\n\r\n      case 'APP_INIT': {\r\n        return {\r\n          ...state,\r\n          ...action.data,\r\n        }\r\n      }\r\n\r\n      case 'SET_STORE_DATA': {\r\n        return {\r\n          ...state,\r\n          ...action.data,\r\n          loaded:true,\r\n        }\r\n      }\r\n\r\n      case 'GO_PREV': {\r\n        return {\r\n          ...state,\r\n          action:\"prev\",\r\n        }\r\n      }\r\n\r\n      case 'GO_NEXT': {\r\n        return {\r\n          ...state,\r\n          action:\"next\",\r\n        }\r\n      }\r\n\r\n      case 'SAVE': {\r\n        return {\r\n          ...state,\r\n          action:\"save\",\r\n        }\r\n      }\r\n\r\n      case 'CLEAR_ACTION': {\r\n        return {\r\n          ...state,\r\n          action:null,\r\n        }\r\n      }\r\n\r\n      default:\r\n        return state\r\n    }\r\n}\r\n\r\nconst mainReducer = (state={}, action) => {\r\n\r\n  if (action.extraAction) {\r\n    state = mainReducer(state,action.extraAction);\r\n  }\r\n\r\n  state = mainReducerController(state,action);\r\n\r\n  return state;\r\n}\r\n\r\n\r\nexport default mainReducer\r\n","import React, { Component } from 'react';\r\nimport {\r\n  goPrev,\r\n  goNext,\r\n} from '../actions/appActions';\r\n\r\nclass TopMenu extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state={\r\n    };\r\n    this.store = this.props.store;\r\n    this.left_buttonHandler=this.left_buttonHandler.bind(this);\r\n    this.right_buttonHandler=this.right_buttonHandler.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.unsubscribe=this.store.subscribe(()=>{this.onStoreChange()});\r\n    this.mounted=true;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.unsubscribe) {\r\n      this.unsubscribe();\r\n    }\r\n    this.mounted=false;\r\n  }\r\n\r\n  onStoreChange() {\r\n    if (this.mounted) {\r\n      let state=this.store.getState();\r\n      this.setState(state);\r\n    }\r\n  }\r\n\r\n  left_buttonHandler(event) {\r\n    this.store.dispatch(\r\n      goPrev()\r\n    )\r\n  }\r\n\r\n  right_buttonHandler(event) {\r\n    this.store.dispatch(\r\n      goNext()\r\n    )\r\n  }\r\n\r\n  render() {\r\n\r\n    let children = [];\r\n    children.push(this.props.children);\r\n\r\n    if (this.state.loaded) {\r\n\r\n      children.push(\r\n        <div\r\n          id=\"title\"\r\n          key=\"title\"\r\n          className=\"topMenuTitle\"\r\n          >{this.state.title}</div>\r\n      );\r\n\r\n      children.push(\r\n        <div\r\n          id=\"left\"\r\n          key=\"left\"\r\n          className=\"topMenuButton\"\r\n          style={{\r\n            left:\"1%\",\r\n          }}\r\n          onClick={this.left_buttonHandler}>Назад</div>\r\n      );\r\n\r\n      children.push(\r\n        <div\r\n          id=\"right\"\r\n          key=\"right\"\r\n          className=\"topMenuButton\"\r\n          style={{\r\n            right:\"1%\",\r\n          }}\r\n          onClick={this.right_buttonHandler}>Вперед</div>\r\n      );\r\n    }\r\n    return React.createElement(\r\n      'div',\r\n      { id:'TopMenu',\r\n        style:this.props.style,\r\n      },\r\n      children\r\n      );\r\n  }\r\n\r\n\r\n\r\n}\r\n\r\nexport default TopMenu;\r\n","export const useImage = (index) => {\r\n  return {\r\n    type: 'USE_IMAGE',\r\n    index,\r\n  }\r\n}\r\n\r\nexport const clearImage = (index) => {\r\n  return {\r\n    type: 'CLEAR_IMAGE',\r\n    index,\r\n  }\r\n}\r\n\r\nexport const updateImage = (index,transform) => {\r\n  return {\r\n    type: 'UPDATE_IMAGE',\r\n    index,\r\n    transform,\r\n  }\r\n}\r\n\r\n\r\nexport const reinitMovable = () => {\r\n  return {\r\n    type: 'REINIT_MOVABLE',\r\n  }\r\n}\r\n\r\nexport const goPrev = () => {\r\n  return {\r\n    type: 'GO_PREV',\r\n  }\r\n}\r\n\r\nexport const goNext = () => {\r\n  return {\r\n    type: 'GO_NEXT',\r\n  }\r\n}\r\n\r\nexport const save = () => {\r\n  return {\r\n    type: 'SAVE',\r\n  }\r\n}\r\n\r\nexport const clearAction = () => {\r\n  return {\r\n    type: 'CLEAR_ACTION',\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\nexport const appInit = (data) => {\r\n  return {\r\n    type: 'APP_INIT',\r\n    data:{\r\n      ...data,\r\n    },\r\n  }\r\n}\r\n\r\nexport const setStoreData = (data) => {\r\n  return {\r\n    type: 'SET_STORE_DATA',\r\n    data:{\r\n      ...data,\r\n    },\r\n  }\r\n}\r\n\r\nexport const loadStoreDataError = (data) => {\r\n  return {\r\n    type: 'LOAD_STORE_DATA_ERROR',\r\n    data:{\r\n      ...data,\r\n      dataLoaded:false,\r\n      reloadData:false,\r\n      loadDataError:true,\r\n    },\r\n  }\r\n}\r\n\r\nexport const reloadStoreData = () => {\r\n  return {\r\n    type: 'RELOAD_STORE_DATA',\r\n    data:{\r\n      dataLoaded:false,\r\n      reloadData:true,\r\n      loadDataError:false,\r\n    },\r\n  }\r\n}\r\n\r\nexport const waitingForReloadStoreData = () => {\r\n  return {\r\n    type: 'WAITING_FOR_RELOAD_STORE_DATA',\r\n    data:{\r\n      dataLoaded:false,\r\n    },\r\n  }\r\n}\r\n\r\nexport const setAppData = (data) => {\r\n  return {\r\n    type: 'SET_APP_DATA',\r\n    data,\r\n  }\r\n}\r\n\r\nexport const setStorageData = (data) => {\r\n  return {\r\n    type: 'SET_STORAGE_DATA',\r\n    data,\r\n  }\r\n}\r\n\r\nexport const saveStorageData = () => {\r\n  return {\r\n    type: 'SAVE_STORAGE_DATA',\r\n    data:{\r\n      saveStorageData:true,\r\n      dataForStorageChanged:null,\r\n    }\r\n  }\r\n}\r\n\r\nexport const storageDataSaved = () => {\r\n  return {\r\n    type: 'STORAGE_DATA_SAVED',\r\n    data:{\r\n      saveStorageData:false,\r\n    }\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\n\r\nimport {\r\n  useImage,\r\n  clearImage,\r\n} from '../actions/appActions';\r\n\r\nclass SideMenu extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state={\r\n    };\r\n    this.store = this.props.store;\r\n    this.image_clickHandler=this.image_clickHandler.bind(this);\r\n    this.clear_buttonHandler=this.clear_buttonHandler.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.unsubscribe=this.store.subscribe(()=>{this.onStoreChange()});\r\n    this.mounted=true;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.unsubscribe) {\r\n      this.unsubscribe();\r\n    }\r\n    this.mounted=false;\r\n  }\r\n\r\n  onStoreChange() {\r\n    if (this.mounted) {\r\n      let state=this.store.getState();\r\n      this.setState(state);\r\n    }\r\n  }\r\n\r\n  image_clickHandler(event) {\r\n    let id=event.target.id;\r\n    let index=Number(id.substr(3));\r\n    this.store.dispatch(\r\n      useImage(index)\r\n    )\r\n  }\r\n\r\n  clear_buttonHandler(event) {\r\n    let id=event.target.id;\r\n    let index=Number(id.substr(3));\r\n    this.store.dispatch(\r\n      clearImage(index)\r\n    )\r\n  }\r\n\r\n  render() {\r\n\r\n    let children = [];\r\n    children.push(this.props.children);\r\n\r\n    if ((this.state)&&(this.state.loaded)&&(this.state.addImagesSrc)) {\r\n\r\n      for (let i = 0; i < this.state.addImagesSrc.length; i++) {\r\n        let imageSrc = this.state.addImagesSrc[i];\r\n        let addImageTransform = this.state.addImagesTransform[i];\r\n        if (!addImageTransform) {\r\n          children.push(\r\n            <img\r\n              id={\"img\"+i}\r\n              key={\"img\"+i}\r\n              src={imageSrc}\r\n              className=\"sideMenuImage\"\r\n              style={{\r\n                top:(i/this.state.addImagesSrc.length)*100+(0.5*100/this.state.addImagesSrc.length)+\"%\",\r\n                transform:\"translateY(-50%)\",\r\n                height:(1/this.state.addImagesSrc.length)*100+\"%\",\r\n              }}\r\n              onClick={this.image_clickHandler}\r\n            />\r\n          );\r\n        } else {\r\n          children.push(\r\n            <div\r\n              id={\"clr\"+i}\r\n              key={\"clr\"+i}\r\n              className=\"sideMenuButton\"\r\n              style={{\r\n                top:(i/this.state.addImagesSrc.length)*100+(0.5*100/this.state.addImagesSrc.length)+\"%\",\r\n                transform:\"translate(-50%,-50%)\",\r\n              }}\r\n              onClick={this.clear_buttonHandler}>Вернуть</div>\r\n          );\r\n\r\n        }\r\n      }\r\n\r\n    }\r\n\r\n    return React.createElement(\r\n      'div',\r\n      { id:'SideMenu',\r\n        style:this.props.style,\r\n      },\r\n      children\r\n      );\r\n  }\r\n\r\n\r\n\r\n}\r\n\r\nexport default SideMenu;\r\n","import React, { Component } from 'react';\r\nimport Moveable from \"react-moveable\";\r\n\r\nimport {\r\n  updateImage,\r\n} from '../actions/appActions';\r\n\r\nclass Editor extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state={}\r\n    this.store = this.props.store;\r\n\r\n    this.currentZ=0;\r\n\r\n    this.targetZs=[];\r\n    this.targetRefs=[];\r\n    this.moveableRefs=[];\r\n    for (let i = 0; i < 10; i++) {\r\n      this.targetZs.push(0);\r\n      this.targetRefs.push(React.createRef());\r\n      this.moveableRefs.push(React.createRef());\r\n    }\r\n\r\n    this.containerRef=React.createRef();\r\n\r\n    this.state={}\r\n\r\n    this.movable_transformHandler=this.movable_transformHandler.bind(this);\r\n    this.movable_transformEndHandler=this.movable_transformEndHandler.bind(this);\r\n\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.unsubscribe=this.store.subscribe(()=>{this.onStoreChange()});\r\n    this.mounted=true;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.unsubscribe) {\r\n      this.unsubscribe();\r\n    }\r\n    this.mounted=false;\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState, snapshot) {\r\n  }\r\n\r\n  onStoreChange() {\r\n    if (this.mounted) {\r\n      let state=this.store.getState();\r\n      this.setState(state);\r\n    }\r\n  }\r\n\r\n  movable_transformHandler(params) {\r\n    if (params.transform) {\r\n      params.target.style.transform=params.transform;\r\n    }\r\n    let index=Number(params.target.id.substr(3));\r\n  }\r\n\r\n  movable_transformEndHandler(params) {\r\n    let index=Number(params.target.id.substr(3));\r\n    let transform=(/\\((.+),\\s*(.+),\\s*(.+),\\s*(.+),\\s*(.+),\\s*(.+)\\)/g).exec(window.getComputedStyle(params.target,null).transform);\r\n    let matrix=[1,0,0,1,0,0];\r\n    if (transform) {\r\n      transform.splice(0,1);\r\n      matrix=[]\r\n      for (let i = 0; i < transform.length; i++) {\r\n        matrix.push(transform[i])\r\n      }\r\n    }\r\n    // console.log(\"?????\",matrix);\r\n    this.currentZ++;\r\n    this.targetZs[index]=this.currentZ;\r\n    \r\n    this.store.dispatch(\r\n      updateImage(index,matrix)\r\n    )\r\n  }\r\n\r\n\r\n  render() {\r\n\r\n    let children = [];\r\n    children.push(this.props.children);\r\n\r\n    if (this.state.addImagesSrc) {\r\n\r\n      let indexes=[]\r\n      for (let i = 0; i < this.state.addImagesSrc.length; i++) {\r\n        indexes.push({i,z:this.targetZs[i]});\r\n      }\r\n      indexes.sort((a,b)=>{return a.z-b.z});\r\n\r\n      for (let ii = 0; ii < indexes.length; ii++) {\r\n        let i=indexes[ii].i;\r\n        let imageSrc = this.state.addImagesSrc[i];\r\n        let addImageTransform = this.state.addImagesTransform[i];\r\n        if (addImageTransform) {\r\n\r\n          // console.log(\"!!!!!\",addImageTransform);\r\n\r\n          children.push(\r\n            <img\r\n              id={\"img\"+i}\r\n              key={\"img\"+i}\r\n              src={imageSrc}\r\n              className=\"editorImage\"\r\n              ref={this.targetRefs[i]}\r\n              style={{\r\n                transform:`matrix(${addImageTransform})`,\r\n                width:this.state.addImagesDefaultSize.width,\r\n                height:this.state.addImagesDefaultSize.height,\r\n              }}\r\n              onLoad={this.movable_transformEndHandler}\r\n              onMouseDown={this.movable_transformEndHandler}\r\n            />\r\n          );\r\n\r\n          children.push(\r\n            <Moveable\r\n              key={\"Moveable\"+i}\r\n              ref={this.moveableRefs[i]}\r\n              target={this.targetRefs[i].current}\r\n              pinchThreshold={20}\r\n              container={this.containerRef.current}\r\n              draggable={true}\r\n              scalable={true}\r\n              resizable={false}\r\n              warpable={false}\r\n              rotatable={true}\r\n              pinchable={false}\r\n              keepRatio={true}\r\n              origin={false}\r\n              throttleDrag={1.5}\r\n              throttleRotate={0.2}\r\n              throttleResize={1}\r\n              throttleScale={0.01}\r\n              onDrag={this.movable_transformHandler}\r\n              onResize={this.movable_transformHandler}\r\n              onScale={this.movable_transformHandler}\r\n              onWarp={this.movable_transformHandler}\r\n              onRotate={this.movable_transformHandler}\r\n              onPinch={this.movable_transformHandler}\r\n              onDragEnd={this.movable_transformEndHandler}\r\n              onScaleEnd={this.movable_transformEndHandler}\r\n              onResizeEnd={this.movable_transformEndHandler}\r\n              onWarpEnd={this.movable_transformEndHandler}\r\n              onRotateEnd={this.movable_transformEndHandler}\r\n              onPinchEnd={this.movable_transformEndHandler}\r\n            />\r\n          )\r\n\r\n\r\n        }\r\n      }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    return React.createElement(\r\n      'div',\r\n      { id:'Editor',\r\n        style:this.props.style,\r\n        ref:this.containerRef,\r\n      },\r\n      children\r\n      );\r\n  }\r\n}\r\n\r\nexport default Editor;\r\n","import React, { Component } from 'react';\r\nimport Editor from './Editor.js'\r\n\r\nclass EditorPlace extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.store = this.props.store;\r\n\r\n    this.ref=React.createRef()\r\n    this.containerRef=React.createRef()\r\n    this.editorRef=React.createRef()\r\n\r\n\r\n    this.state={\r\n      editorScale:.15,\r\n      editorX:0,\r\n      editorY:0,\r\n\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.unsubscribe=this.store.subscribe(()=>{this.onStoreChange()});\r\n    this.mounted=true;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.unsubscribe) {\r\n      this.unsubscribe();\r\n    }\r\n    this.mounted=false;\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState, snapshot) {\r\n    this.updateBounds(this.ref.current.clientWidth,this.ref.current.clientHeight);\r\n  }\r\n\r\n  onStoreChange() {\r\n    if (this.mounted) {\r\n      let state=this.store.getState();\r\n      this.setState({\r\n        ...this.state,\r\n        ...state,\r\n      });\r\n    }\r\n  }\r\n\r\n  updateBounds(width,height) {\r\n    if ((this.lastWidth!==width)||(this.lastHeight!==height)) {\r\n      if (this.state.editorBounds) {\r\n        this.lastWidth=width;\r\n        this.lastHeight=height;\r\n        let bounds=this.state.editorBounds;\r\n        let editorScale=Math.min(width/bounds.width,height/bounds.height);\r\n        let editorX=(width-bounds.width*editorScale)/2/editorScale;\r\n        let editorY=(height-bounds.height*editorScale)/2/editorScale;\r\n        this.setState({\r\n          ...this.state,\r\n          editorScale,\r\n          editorX,\r\n          editorY,\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n\r\n    let children = [];\r\n    children.push(this.props.children);\r\n\r\n    children.push(\r\n      <div\r\n        id=\"EditorContainer\"\r\n        key=\"EditorContainer\"\r\n        ref={this.containerRef}\r\n        style={{\r\n          width:(this.state.editorBounds)?this.state.editorBounds.width:0,\r\n          height:(this.state.editorBounds)?this.state.editorBounds.height:0,\r\n          transform:`scale(${this.state.editorScale}) translateX(${this.state.editorX}px) translateY(${this.state.editorY}px)`\r\n        }}\r\n      >\r\n        <Editor\r\n          id=\"Editor\"\r\n          key=\"Editor\"\r\n          scale={this.state.editorScale}\r\n          store={this.props.store}\r\n          ref={this.editorRef}\r\n          style={{\r\n            width:(this.state.editorBounds)?this.state.editorBounds.width:0,\r\n            height:(this.state.editorBounds)?this.state.editorBounds.height:0,\r\n          }}\r\n        />\r\n        <img\r\n          id=\"MainImage\"\r\n          key=\"MainImage\"\r\n          src={this.state.mainImageSrc}\r\n        />\r\n      </div>\r\n    );\r\n\r\n    return React.createElement(\r\n      'div',\r\n      { id:'EditorPlace',\r\n        style:this.props.style,\r\n        ref:this.ref,\r\n      },\r\n      children\r\n      );\r\n  }\r\n}\r\n\r\nexport default EditorPlace;\r\n","import React, { Component } from 'react';\r\n\r\nimport TopMenu from '../components/TopMenu.js';\r\nimport SideMenu from '../components/SideMenu.js';\r\nimport EditorPlace from '../components/EditorPlace.js';\r\n\r\nclass Container extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {}\r\n    this.store = this.props.store;\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.unsubscribe=this.store.subscribe(()=>{this.onStoreChange()});\r\n    this.mounted=true;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.unsubscribe) {\r\n      this.unsubscribe();\r\n    }\r\n    this.mounted=false;\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState, snapshot) {\r\n  }\r\n\r\n  onStoreChange() {\r\n    if (this.mounted) {\r\n      let state=this.store.getState();\r\n      this.setState(state);\r\n    }\r\n  }\r\n\r\n  render() {\r\n\r\n    let children = [];\r\n    children.push(this.props.children);\r\n\r\n    children.push(\r\n      <SideMenu\r\n        store={this.store}\r\n        key=\"SideMenu\"\r\n        style={{\r\n          width:(this.state.sideMenu)?this.state.sideMenu.width:0,\r\n          top:(this.state.topMenu)?this.state.topMenu.height:0,\r\n        }}\r\n      />\r\n    );\r\n\r\n    children.push(\r\n      <EditorPlace\r\n        store={this.store}\r\n        key=\"EditorPlace\"\r\n        style={{\r\n          right:(this.state.sideMenu)?this.state.sideMenu.width:0,\r\n          top:(this.state.topMenu)?this.state.topMenu.height:0,\r\n        }}\r\n      />\r\n    );\r\n\r\n    children.push(\r\n      <TopMenu\r\n        store={this.store}\r\n        key=\"TopMenu\"\r\n        style={{\r\n          height:(this.state.topMenu)?this.state.topMenu.height:0,\r\n        }}\r\n      />\r\n    );\r\n\r\n    return React.createElement(\r\n      'div',\r\n      { id:'Container',\r\n      },\r\n      children\r\n      );\r\n  }\r\n}\r\n\r\n// export default connect(\r\n//   null,\r\n//   null\r\n// )(Container);\r\n\r\nexport default Container;\r\n","import { Component } from 'react';\r\n\r\nimport { setStorageData, storageDataSaved } from '../actions/appActions';\r\n\r\n// import LocalStorageManager from './LocalStorageManager';\r\n\r\nclass DataManager extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.store = this.props.store;\r\n    this.state = {\r\n      isLoading:false,\r\n      isLoaded:false,\r\n    }\r\n    this.loader=null;\r\n    this.result=null;\r\n\r\n  }\r\n\r\n/* ++++ React methods ++++ */\r\n\r\n  componentDidMount() {\r\n    this.unsubscribe=this.store.subscribe(()=>{this.onStoreChange()});\r\n    // this.load();\r\n    this.mounted=true;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.unsubscribe) {\r\n      this.unsubscribe();\r\n    }\r\n    this.mounted=false;\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n  }\r\n\r\n  onStoreChange() {\r\n    if (this.mounted) {\r\n      let state=this.store.getState();\r\n      // this.setState(state);\r\n      if (state.reloadData) {\r\n        // console.log(\"DataManager reloadData\");\r\n        // this.load()\r\n      } else\r\n      if (state.saveStorageData) {\r\n        // console.log(\"DataManager saveStorageData\");\r\n        this.saveStorageData();\r\n      }\r\n    }\r\n  }\r\n\r\n  loadStorageData()\r\n  {\r\n    let data=this.localStorageManager.load();\r\n    this.store.dispatch(\r\n      setStorageData(data)\r\n    );\r\n  }\r\n\r\n  saveStorageData()\r\n  {\r\n    // let state=this.store.getState();\r\n    this.localStorageManager.save({\r\n    });\r\n\r\n    this.store.dispatch(\r\n      storageDataSaved()\r\n    );\r\n  }\r\n\r\n  render () {\r\n    return null;\r\n  }\r\n\r\n}\r\nexport default DataManager;\r\n","import { Component } from 'react';\r\n\r\nimport {\r\n  reloadStoreData,\r\n  saveStorageData,\r\n  reinitMovable,\r\n  clearAction,\r\n } from '../actions/appActions';\r\n\r\nclass Control extends Component {\r\n\r\n  //--------------------------------------------------------------------------\r\n\t//\r\n\t// Constructor\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n    this.store = this.props.store;\r\n\r\n    this.actionMap={\r\n    }\r\n\r\n    this.appStartDelay=500;\r\n\r\n    // console.log(\"Control constructor\");\r\n\r\n  }\r\n\r\n\r\n  //--------------------------------------------------------------------------\r\n  //\r\n  // React methods\r\n  //\r\n  //--------------------------------------------------------------------------\r\n\r\n  componentDidMount() {\r\n    this.unsubscribe=this.store.subscribe(()=>{this.onStoreChange()});\r\n    this.mounted=true;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.unsubscribe) {\r\n      this.unsubscribe();\r\n    }\r\n    this.mounted=false;\r\n  }\r\n\r\n  //--------------------------------------------------------------------------\r\n  //\r\n  // Own methods\r\n  //\r\n  //--------------------------------------------------------------------------\r\n\r\n  onStoreChange() {\r\n    if (this.mounted) {\r\n\r\n      let state=this.store.getState();\r\n      // this.setState(state);\r\n\r\n      if (state.justAdded) {\r\n        this.loadTimeout=setTimeout(()=>{\r\n          this.store.dispatch(\r\n            reinitMovable()\r\n          );\r\n        }, 100);\r\n      }\r\n\r\n      if (state.justAdded) {\r\n        this.loadTimeout=setTimeout(()=>{\r\n          this.store.dispatch(\r\n            reinitMovable()\r\n          );\r\n        }, 100);\r\n      }\r\n\r\n      if (state.action) {\r\n\r\n        this.store.dispatch(\r\n          clearAction()\r\n        );\r\n\r\n        switch (state.action) {\r\n\r\n          case \"next\": {\r\n            this.props.app.props.onNext(this.props.app);\r\n            break;\r\n          }\r\n\r\n          case \"prev\": {\r\n            this.props.app.props.onPrev(this.props.app);\r\n            break;\r\n          }\r\n\r\n          case \"save\": {\r\n            this.props.app.props.onSave(this.props.app);\r\n            break;\r\n          }\r\n\r\n          default:\r\n\r\n        }\r\n\r\n\r\n      }\r\n\r\n\r\n      //\r\n      //\r\n      // if (state.dataLoaded) {\r\n      //\r\n      //   // console.log(\"Control dataLoaded\",state.windowIsVisible);\r\n      //   if (state.windowIsVisible) {\r\n      //     // console.log(\"Control Wait for next load\");\r\n      //     this.store.dispatch(\r\n      //       waitingForReloadStoreData()\r\n      //     );\r\n      //     this.waitForReload();\r\n      //   } else {\r\n      //     // console.log(\"Tab is inactive. Do not load\");\r\n      //   }\r\n      //\r\n      // } else\r\n      // if (state.loadDataError) {\r\n      //   // console.log(\"Control loadDataError\");\r\n      //   this.store.dispatch(\r\n      //     reloadStoreData()\r\n      //   );\r\n      // } else\r\n      // }\r\n\r\n      if (state.dataForStorageChanged) {\r\n      // console.log(\"Control dataForStorageChanged\");\r\n        this.store.dispatch(\r\n          saveStorageData()\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  stopTimeout() {\r\n    if (this.loadTimeout) {\r\n      clearTimeout(this.loadTimeout)\r\n      this.loadTimeout=null;\r\n    }\r\n  }\r\n\r\n  waitForReload() {\r\n    // console.log(\"Control waitForReload\");\r\n    this.stopTimeout();\r\n\r\n    this.loadTimeout=setTimeout(()=>{\r\n      // console.log(\"Control Reload\");\r\n      this.store.dispatch(\r\n        reloadStoreData()\r\n      );\r\n    },this.store.reloadTimeout);\r\n\r\n  }\r\n\r\n\r\n\r\n  render () {\r\n    return null;\r\n  }\r\n\r\n}\r\n\r\nexport default Control;\r\n","import { isMobile,isLocal } from '../core/helpers';\r\n\r\nconst settings = {\r\n\r\n    assetsUrl: \".\",\r\n    localStoreName:\"appState_261020\",\r\n\r\n    isMobile:isMobile(),\r\n    isLocal:isLocal(),\r\n\r\n    topMenu:{\r\n      height:\"5%\",\r\n    },\r\n\r\n    sideMenu:{\r\n      width:\"10%\",\r\n    },\r\n\r\n    editorBounds:{\r\n      width:0,\r\n      height:0,\r\n    },\r\n\r\n    addImagesDefaultSize:{\r\n      width:500,\r\n      height:500,\r\n    },\r\n\r\n    addImagesDefaultScale:0.5,\r\n\r\n    mainImageSrc:\"\",\r\n    addImagesSrc:[\"\",\"\",\"\"],\r\n    addImagesTransform:[null,null,null],\r\n\r\n    title:\"\",\r\n}\r\n\r\nexport default settings;\r\n","import MobileDetect from 'mobile-detect'\r\nimport path from \"path\"\r\n\r\nexport const callLater = (callback,delay = 100) => {\r\n  return setTimeout(callback,delay);\r\n}\r\n\r\nexport const isMobile = () => {\r\n  var mobileDetect = new MobileDetect(window.navigator.userAgent);\r\n  return mobileDetect.mobile();\r\n}\r\n\r\nexport const isLocal = () => {\r\n  return !(/^h/.test(document.location.toString()));\r\n}\r\n\r\nexport const objectIsEmpty = (object) => {\r\n  return Object.keys(object).length === 0 && object.constructor === Object;\r\n}\r\n\r\nexport const correctUrl = (url,assetsUrl) => {\r\n\r\n  if (url) {\r\n    if (url.substr(0,1)===\"/\") {\r\n      if (!assetsUrl) {\r\n        assetsUrl=\".\";\r\n      }\r\n      url=path.join(assetsUrl,url);\r\n    }\r\n  }\r\n\r\n  return url;\r\n\r\n}\r\n\r\nexport const openLink = (link) => {\r\n  // let url=correctUrl(link)\r\n  // console.log(\"??\",url);\r\n  window.open(link,\"_blank\")\r\n}\r\n\r\nexport const formatWeight = (weight) => {\r\n  if (weight==null) {\r\n    return \"--Кб\"\r\n  }\r\n\r\n  weight=Number(weight)\r\n  let output=\"\"\r\n\r\n  if (weight>=1000000) {\r\n    output=Math.round(weight*100/1000000)/100+\"Мб\";\r\n  } else\r\n  if (weight>=1000) {\r\n    output=Math.round(weight*100/1000)/100+\"Kб\";\r\n  } else {\r\n    output=weight+\"б\";\r\n  }\r\n  return output\r\n}\r\n\r\nexport const exportCreatives = (creatives,passStatus) => {\r\n  let creativeList=[];\r\n  for (let name in creatives) {\r\n    let creative=creatives[name];\r\n    creativeList.push(creative);\r\n  }\r\n\r\n  creativeList.sort((a,b)=>{\r\n    if (a.section>b.section) return 1;\r\n    if (a.section<b.section) return -1;\r\n\r\n    if (a.publisher>b.publisher) return 1;\r\n    if (a.publisher<b.publisher) return -1;\r\n\r\n    if (a.formatName>b.formatName) return 1;\r\n    if (a.formatName<b.formatName) return -1;\r\n\r\n    if (a.feed>b.feed) return 1;\r\n    if (a.feed<b.feed) return -1;\r\n\r\n    if (a.updateTime>b.updateTime) return 1;\r\n    return -1;\r\n  });\r\n\r\n  let data=[]\r\n  data.push(\r\n    [\r\n      { value:\"Раздел\", type:\"string\" },\r\n      { value:\"Площадка\", type:\"string\" },\r\n      { value:\"Платформа\", type:\"string\" },\r\n      { value:\"Формат\", type:\"string\" },\r\n      { value:\"Фид\", type:\"string\" },\r\n      { value:\"Статус\", type:\"string\" },\r\n      { value:\"Рецензия\", type:\"string\" },\r\n    ]\r\n  );\r\n\r\n  for (let i = 0; i < creativeList.length; i++) {\r\n    let creative=creativeList[i];\r\n    data.push(\r\n      [\r\n        { value:creative.section, type:\"string\" },\r\n        { value:creative.publisher, type:\"string\" },\r\n        { value:creative.platform, type:\"string\" },\r\n        { value:creative.formatName, type:\"string\" },\r\n        { value:creative.feed, type:\"string\" },\r\n        { value:creative.state, type:\"string\" },\r\n        { value:passStatus[creative.name]?\"Принят\":\"Не принят\", type:\"string\" },\r\n      ]\r\n    );\r\n  }\r\n\r\n  return data;\r\n}\r\n","import React, { Component } from 'react';\n\nimport mainReducer from './reducers/mainReducer'\nimport Container from './core/Container';\n\nimport DataManager from './core/DataManager';\nimport Control from './core/Control';\n\nimport { Provider } from 'react-redux'\nimport { createStore } from 'redux'\n\nimport { appInit, setStoreData } from './actions/appActions';\n\nimport settings from './configuration/Settings';\n\nimport './css/app.css';\n\nconst Store = createStore(\n  mainReducer,\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\n);\n\nclass App extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {}\n\n    this.initHandler=this.initHandler.bind(this);\n    this.resizeHandler=this.resizeHandler.bind(this);\n  }\n\n  updateLayout() {\n    let windowInnerWidth=document.documentElement.clientWidth || document.body.clientWidth || window.innerWidth;\n    let windowInnerHeight=document.documentElement.clientHeight || document.body.clientHeight || window.innerHeight;\n\n    this.setState({\n      ...this.state,\n      windowWidth:windowInnerWidth,\n      windowHeight:windowInnerHeight,\n    });\n\n  }\n\n  initHandler(event) {\n    this.updateLayout();\n  }\n\n  resizeHandler(event) {\n    this.updateLayout();\n  }\n\n  setData(data) {\n    Store.dispatch(\n      setStoreData(data)\n    );\n  }\n\n  getData(data) {\n    return Store.getState();\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n  }\n\n  componentDidMount() {\n    Store.dispatch(\n      appInit(settings)\n    );\n\n    window.addEventListener(\"load\",this.initHandler);\n    window.addEventListener(\"resize\",this.resizeHandler);\n\n    // window.editorApp=this;\n    // if (window.onEditorAppReady) {\n    //   window.onEditorAppReady(this);\n    // }\n\n    this.props.onInit(this);\n\n  }\n\n  render() {\n    return (\n      <Provider store={Store}>\n        <Container\n          id=\"Container\"\n          windowWidth={this.state.windowWidth}\n          windowHeight={this.state.windowHeight}\n          store={Store}\n        >\n          <DataManager\n            store={Store}\n          />\n          <Control\n            app={this}\n            store={Store}\n          />\n        </Container>\n      </Provider>\n    );\n  }\n\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nlet element=document.getElementById('editorWidget');\n\nconsole.log(element.getAttribute(\"oninit\"));\n\nReactDOM.render(\n  <React.StrictMode>\n    <App\n      id=\"editorApp\"\n      onInit={window[element.getAttribute(\"oninit\")]}\n      onNext={window[element.getAttribute(\"onnext\")]}\n      onPrev={window[element.getAttribute(\"onprev\")]}\n    />\n  </React.StrictMode>,\n  element\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}