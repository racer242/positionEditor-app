{"version":3,"sources":["reducers/mainReducer.js","actions/appActions.js","components/TopMenu.js","components/SideMenu.js","components/Editor.js","components/EditorPlace.js","core/Container.js","core/DataManager.js","core/Control.js","configuration/Settings.js","core/helpers.js","App.js","serviceWorker.js","index.js"],"names":["mainReducerController","state","action","type","editorBounds","imageSize","addImagesDefaultSize","addImagesTransform","concat","index","x","width","y","height","scale","addImagesDefaultScale","rotation","addImagesMatrix","addImagesBounds","justAdded","transform","matrix","bounds","data","loaded","mainReducer","extraAction","updateImage","TopMenu","props","store","left_buttonHandler","bind","right_buttonHandler","this","unsubscribe","subscribe","onStoreChange","mounted","getState","setState","event","dispatch","children","push","id","key","className","title","style","left","onClick","right","React","createElement","Component","SideMenu","image_clickHandler","clear_buttonHandler","target","Number","substr","useImage","clearImage","addImagesSrc","i","length","imageSrc","top","src","Editor","currentZ","targetZs","targetRefs","moveableRefs","createRef","containerRef","movable_transformHandler","movable_transformEndHandler","prevProps","prevState","snapshot","params","translate","delta","rotate","t","exec","window","getComputedStyle","splice","getBoundingClientRect","geom","offsetY","indexes","z","sort","a","b","ii","addImageTransform","addImageMatrix","addImageBounds","ref","onLoad","onMouseDown","current","pinchThreshold","container","draggable","scalable","resizable","warpable","rotatable","pinchable","keepRatio","origin","throttleDrag","throttleRotate","throttleResize","throttleScale","onDrag","onResize","onScale","onWarp","onRotate","onPinch","onDragEnd","onScaleEnd","onResizeEnd","onWarpEnd","onRotateEnd","onPinchEnd","EditorPlace","editorRef","editorScale","editorX","editorY","updateBounds","clientWidth","clientHeight","lastWidth","lastHeight","Math","min","mainImageSrc","Container","sideMenu","topMenu","DataManager","isLoading","isLoaded","loader","result","reloadData","saveStorageData","localStorageManager","load","setStorageData","save","Control","actionMap","appStartDelay","loadTimeout","setTimeout","app","onNext","onPrev","onSave","dataForStorageChanged","clearTimeout","stopTimeout","dataLoaded","loadDataError","reloadTimeout","settings","assetsUrl","localStoreName","isMobile","MobileDetect","navigator","userAgent","mobile","isLocal","test","document","location","toString","Store","createStore","__REDUX_DEVTOOLS_EXTENSION__","App","initHandler","resizeHandler","windowInnerWidth","documentElement","body","innerWidth","windowInnerHeight","innerHeight","windowWidth","windowHeight","updateLayout","setStoreData","addEventListener","onInit","Boolean","hostname","match","element","getElementById","console","log","getAttribute","ReactDOM","render","StrictMode","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.27f89683.chunk.js","sourcesContent":["let mainReducerController = (state={}, action) => {\r\n\r\n    // console.log(\"mainReducer\",action);\r\n\r\n    switch (action.type) {\r\n\r\n\r\n      case 'USE_IMAGE': {\r\n        let editorBounds=state.editorBounds;\r\n        let imageSize=state.addImagesDefaultSize;\r\n\r\n        let addImagesTransform=state.addImagesTransform.concat();\r\n        if (!addImagesTransform[action.index]) {\r\n          addImagesTransform[action.index]={\r\n            x:(editorBounds.width-imageSize.width)/2,\r\n            y:(editorBounds.height-imageSize.height)/2,\r\n            scale:state.addImagesDefaultScale,\r\n            rotation:0,\r\n          }\r\n        }\r\n\r\n        let addImagesMatrix=state.addImagesMatrix.concat();\r\n        if (!addImagesMatrix[action.index]) {\r\n          addImagesMatrix[action.index]=[\r\n            state.addImagesDefaultScale, 0, 0, state.addImagesDefaultScale, (editorBounds.width-imageSize.width)/2, (editorBounds.height-imageSize.height)/2\r\n          ]\r\n        }\r\n\r\n        let addImagesBounds=state.addImagesBounds.concat();\r\n        if (!addImagesBounds[action.index]) {\r\n          addImagesBounds[action.index]={\r\n            x:(editorBounds.width-imageSize.width)/2,\r\n            y:(editorBounds.height-imageSize.height)/2,\r\n            width:imageSize.width*state.addImagesDefaultScale,\r\n            height:imageSize.height*state.addImagesDefaultScale,\r\n          }\r\n        }\r\n\r\n        return {\r\n          ...state,\r\n          addImagesTransform,\r\n          addImagesMatrix,\r\n          addImagesBounds,\r\n          justAdded:true,\r\n        }\r\n      }\r\n\r\n      case 'REINIT_MOVABLE': {\r\n        return {\r\n          ...state,\r\n          justAdded:false,\r\n        }\r\n      }\r\n\r\n      case 'CLEAR_IMAGE': {\r\n        let addImagesTransform=state.addImagesTransform.concat();\r\n        addImagesTransform[action.index]=null;\r\n\r\n        let addImagesMatrix=state.addImagesMatrix.concat();\r\n        addImagesMatrix[action.index]=null;\r\n\r\n        let addImagesBounds=state.addImagesBounds.concat();\r\n        addImagesBounds[action.index]=null;\r\n\r\n        return {\r\n          ...state,\r\n          addImagesTransform,\r\n          addImagesMatrix,\r\n          addImagesBounds,\r\n        }\r\n      }\r\n\r\n      case 'UPDATE_IMAGE': {\r\n\r\n        let addImagesTransform=state.addImagesTransform.concat();\r\n        if (action.transform) {\r\n          addImagesTransform[action.index]=action.transform;\r\n        }\r\n\r\n        let addImagesMatrix=state.addImagesMatrix.concat();\r\n        if (action.matrix) {\r\n          addImagesMatrix[action.index]=action.matrix;\r\n        }\r\n\r\n        let addImagesBounds=state.addImagesBounds.concat();\r\n        if (action.bounds) {\r\n          addImagesBounds[action.index]=action.bounds;\r\n        }\r\n\r\n        // console.log(addImagesTransform);\r\n        // console.log(addImagesMatrix);\r\n\r\n        return {\r\n          ...state,\r\n          addImagesTransform,\r\n          addImagesMatrix,\r\n          addImagesBounds,\r\n          justAdded:false,\r\n        }\r\n      }\r\n\r\n      // case 'WAITING_FOR_RELOAD_STORE_DATA':\r\n      // case 'STORAGE_DATA_SAVED':\r\n      // case 'SAVE_STORAGE_DATA':\r\n      // case 'SET_STORAGE_DATA':\r\n      // case 'LOAD_STORE_DATA_ERROR':\r\n      // case 'RELOAD_STORE_DATA':\r\n\r\n      case 'APP_INIT': {\r\n        return {\r\n          ...state,\r\n          ...action.data,\r\n        }\r\n      }\r\n\r\n      case 'SET_STORE_DATA': {\r\n        // console.log(\"!!!?????????!!!!!!!!!\");\r\n        return {\r\n          ...state,\r\n          ...action.data,\r\n          loaded:true,\r\n          justAdded:true,\r\n        }\r\n      }\r\n\r\n      case 'GO_PREV': {\r\n        return {\r\n          ...state,\r\n          action:\"prev\",\r\n        }\r\n      }\r\n\r\n      case 'GO_NEXT': {\r\n        return {\r\n          ...state,\r\n          action:\"next\",\r\n        }\r\n      }\r\n\r\n      case 'SAVE': {\r\n        return {\r\n          ...state,\r\n          action:\"save\",\r\n        }\r\n      }\r\n\r\n      case 'CLEAR_ACTION': {\r\n        return {\r\n          ...state,\r\n          action:null,\r\n        }\r\n      }\r\n\r\n      default:\r\n        return state\r\n    }\r\n}\r\n\r\nconst mainReducer = (state={}, action) => {\r\n\r\n  if (action.extraAction) {\r\n    state = mainReducer(state,action.extraAction);\r\n  }\r\n\r\n  state = mainReducerController(state,action);\r\n\r\n  return state;\r\n}\r\n\r\n\r\nexport default mainReducer\r\n","export const useImage = (index) => {\r\n  return {\r\n    type: 'USE_IMAGE',\r\n    index,\r\n  }\r\n}\r\n\r\nexport const clearImage = (index) => {\r\n  return {\r\n    type: 'CLEAR_IMAGE',\r\n    index,\r\n  }\r\n}\r\n\r\nexport const updateImage = (index,transform,matrix,bounds) => {\r\n  return {\r\n    type: 'UPDATE_IMAGE',\r\n    index,\r\n    transform,\r\n    matrix,\r\n    bounds,\r\n  }\r\n}\r\n\r\n\r\nexport const reinitMovable = () => {\r\n  return {\r\n    type: 'REINIT_MOVABLE',\r\n  }\r\n}\r\n\r\nexport const goPrev = () => {\r\n  return {\r\n    type: 'GO_PREV',\r\n  }\r\n}\r\n\r\nexport const goNext = () => {\r\n  return {\r\n    type: 'GO_NEXT',\r\n  }\r\n}\r\n\r\nexport const save = () => {\r\n  return {\r\n    type: 'SAVE',\r\n  }\r\n}\r\n\r\nexport const clearAction = () => {\r\n  return {\r\n    type: 'CLEAR_ACTION',\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\nexport const appInit = (data) => {\r\n  return {\r\n    type: 'APP_INIT',\r\n    data:{\r\n      ...data,\r\n    },\r\n  }\r\n}\r\n\r\nexport const setStoreData = (data) => {\r\n  return {\r\n    type: 'SET_STORE_DATA',\r\n    data:{\r\n      ...data,\r\n    },\r\n  }\r\n}\r\n\r\nexport const loadStoreDataError = (data) => {\r\n  return {\r\n    type: 'LOAD_STORE_DATA_ERROR',\r\n    data:{\r\n      ...data,\r\n      dataLoaded:false,\r\n      reloadData:false,\r\n      loadDataError:true,\r\n    },\r\n  }\r\n}\r\n\r\nexport const reloadStoreData = () => {\r\n  return {\r\n    type: 'RELOAD_STORE_DATA',\r\n    data:{\r\n      dataLoaded:false,\r\n      reloadData:true,\r\n      loadDataError:false,\r\n    },\r\n  }\r\n}\r\n\r\nexport const waitingForReloadStoreData = () => {\r\n  return {\r\n    type: 'WAITING_FOR_RELOAD_STORE_DATA',\r\n    data:{\r\n      dataLoaded:false,\r\n    },\r\n  }\r\n}\r\n\r\nexport const setAppData = (data) => {\r\n  return {\r\n    type: 'SET_APP_DATA',\r\n    data,\r\n  }\r\n}\r\n\r\nexport const setStorageData = (data) => {\r\n  return {\r\n    type: 'SET_STORAGE_DATA',\r\n    data,\r\n  }\r\n}\r\n\r\nexport const saveStorageData = () => {\r\n  return {\r\n    type: 'SAVE_STORAGE_DATA',\r\n    data:{\r\n      saveStorageData:true,\r\n      dataForStorageChanged:null,\r\n    }\r\n  }\r\n}\r\n\r\nexport const storageDataSaved = () => {\r\n  return {\r\n    type: 'STORAGE_DATA_SAVED',\r\n    data:{\r\n      saveStorageData:false,\r\n    }\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport {\r\n  goPrev,\r\n  goNext,\r\n} from '../actions/appActions';\r\n\r\nclass TopMenu extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state={\r\n    };\r\n    this.store = this.props.store;\r\n    this.left_buttonHandler=this.left_buttonHandler.bind(this);\r\n    this.right_buttonHandler=this.right_buttonHandler.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.unsubscribe=this.store.subscribe(()=>{this.onStoreChange()});\r\n    this.mounted=true;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.unsubscribe) {\r\n      this.unsubscribe();\r\n    }\r\n    this.mounted=false;\r\n  }\r\n\r\n  onStoreChange() {\r\n    if (this.mounted) {\r\n      let state=this.store.getState();\r\n      this.setState(state);\r\n    }\r\n  }\r\n\r\n  left_buttonHandler(event) {\r\n    this.store.dispatch(\r\n      goPrev()\r\n    )\r\n  }\r\n\r\n  right_buttonHandler(event) {\r\n    this.store.dispatch(\r\n      goNext()\r\n    )\r\n  }\r\n\r\n  render() {\r\n\r\n    let children = [];\r\n    children.push(this.props.children);\r\n\r\n    if (this.state.loaded) {\r\n\r\n      children.push(\r\n        <div\r\n          id=\"title\"\r\n          key=\"title\"\r\n          className=\"topMenuTitle\"\r\n          >{this.state.title}</div>\r\n      );\r\n\r\n      children.push(\r\n        <div\r\n          id=\"left\"\r\n          key=\"left\"\r\n          className=\"topMenuButton\"\r\n          style={{\r\n            left:\"1%\",\r\n          }}\r\n          onClick={this.left_buttonHandler}>Назад</div>\r\n      );\r\n\r\n      children.push(\r\n        <div\r\n          id=\"right\"\r\n          key=\"right\"\r\n          className=\"topMenuButton\"\r\n          style={{\r\n            right:\"1%\",\r\n          }}\r\n          onClick={this.right_buttonHandler}>Вперед</div>\r\n      );\r\n    }\r\n    return React.createElement(\r\n      'div',\r\n      { id:'TopMenu',\r\n        style:this.props.style,\r\n      },\r\n      children\r\n      );\r\n  }\r\n\r\n\r\n\r\n}\r\n\r\nexport default TopMenu;\r\n","import React, { Component } from 'react';\r\n\r\nimport {\r\n  useImage,\r\n  clearImage,\r\n} from '../actions/appActions';\r\n\r\nclass SideMenu extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state={\r\n    };\r\n    this.store = this.props.store;\r\n    this.image_clickHandler=this.image_clickHandler.bind(this);\r\n    this.clear_buttonHandler=this.clear_buttonHandler.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.unsubscribe=this.store.subscribe(()=>{this.onStoreChange()});\r\n    this.mounted=true;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.unsubscribe) {\r\n      this.unsubscribe();\r\n    }\r\n    this.mounted=false;\r\n  }\r\n\r\n  onStoreChange() {\r\n    if (this.mounted) {\r\n      let state=this.store.getState();\r\n      this.setState(state);\r\n    }\r\n  }\r\n\r\n  image_clickHandler(event) {\r\n    let id=event.target.id;\r\n    let index=Number(id.substr(3));\r\n    this.store.dispatch(\r\n      useImage(index)\r\n    )\r\n  }\r\n\r\n  clear_buttonHandler(event) {\r\n    let id=event.target.id;\r\n    let index=Number(id.substr(3));\r\n    this.store.dispatch(\r\n      clearImage(index)\r\n    )\r\n  }\r\n\r\n  render() {\r\n\r\n    let children = [];\r\n    children.push(this.props.children);\r\n\r\n    if ((this.state)&&(this.state.loaded)&&(this.state.addImagesSrc)) {\r\n\r\n      for (let i = 0; i < this.state.addImagesSrc.length; i++) {\r\n        let imageSrc = this.state.addImagesSrc[i];\r\n        let addImageTransform = this.state.addImagesMatrix[i];\r\n        if (!addImageTransform) {\r\n          children.push(\r\n            <img\r\n              id={\"img\"+i}\r\n              key={\"img\"+i}\r\n              src={imageSrc}\r\n              className=\"sideMenuImage\"\r\n              style={{\r\n                top:(i/this.state.addImagesSrc.length)*100+(0.5*100/this.state.addImagesSrc.length)+\"%\",\r\n                transform:\"translateY(-50%)\",\r\n                height:(1/this.state.addImagesSrc.length)*100+\"%\",\r\n              }}\r\n              onClick={this.image_clickHandler}\r\n            />\r\n          );\r\n        } else {\r\n          children.push(\r\n            <div\r\n              id={\"clr\"+i}\r\n              key={\"clr\"+i}\r\n              className=\"sideMenuButton\"\r\n              style={{\r\n                top:(i/this.state.addImagesSrc.length)*100+(0.5*100/this.state.addImagesSrc.length)+\"%\",\r\n                transform:\"translate(-50%,-50%)\",\r\n              }}\r\n              onClick={this.clear_buttonHandler}>Вернуть</div>\r\n          );\r\n\r\n        }\r\n      }\r\n\r\n    }\r\n\r\n    return React.createElement(\r\n      'div',\r\n      { id:'SideMenu',\r\n        style:this.props.style,\r\n      },\r\n      children\r\n      );\r\n  }\r\n\r\n\r\n\r\n}\r\n\r\nexport default SideMenu;\r\n","import React, { Component } from 'react';\r\nimport Moveable from \"react-moveable\";\r\n\r\nimport {\r\n  updateImage,\r\n} from '../actions/appActions';\r\n\r\nclass Editor extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state={}\r\n    this.store = this.props.store;\r\n\r\n    this.currentZ=0;\r\n\r\n    this.targetZs=[];\r\n    this.targetRefs=[];\r\n    this.moveableRefs=[];\r\n    for (let i = 0; i < 10; i++) {\r\n      this.targetZs.push(0);\r\n      this.targetRefs.push(React.createRef());\r\n      this.moveableRefs.push(React.createRef());\r\n    }\r\n\r\n    this.containerRef=React.createRef();\r\n\r\n    this.state={}\r\n\r\n    this.movable_transformHandler=this.movable_transformHandler.bind(this);\r\n    this.movable_transformEndHandler=this.movable_transformEndHandler.bind(this);\r\n\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.unsubscribe=this.store.subscribe(()=>{this.onStoreChange()});\r\n    this.mounted=true;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.unsubscribe) {\r\n      this.unsubscribe();\r\n    }\r\n    this.mounted=false;\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState, snapshot) {\r\n  }\r\n\r\n  onStoreChange() {\r\n    if (this.mounted) {\r\n      let state=this.store.getState();\r\n      this.setState(state);\r\n    }\r\n  }\r\n\r\n  movable_transformHandler(params) {\r\n    if (params.transform) {\r\n      params.target.style.transform=params.transform;\r\n    }\r\n    let index=Number(params.target.id.substr(3));\r\n    let transform=this.state.addImagesTransform[index];\r\n\r\n    if (params.translate!=null) {\r\n      transform.x+=Number(params.delta[0])*transform.scale;\r\n      transform.y+=Number(params.delta[1])*transform.scale;\r\n    }\r\n    if (params.scale!=null) {\r\n      transform.scale*=Number(params.delta[0]);\r\n    }\r\n    if (params.rotate!=null) {\r\n      transform.rotation+=Number(params.delta);\r\n    }\r\n\r\n    this.store.dispatch(\r\n      updateImage(index,transform)\r\n    )\r\n\r\n  }\r\n\r\n  movable_transformEndHandler(params) {\r\n    let index=Number(params.target.id.substr(3));\r\n    let t=(/\\((.+),\\s*(.+),\\s*(.+),\\s*(.+),\\s*(.+),\\s*(.+)\\)/g).exec(window.getComputedStyle(params.target,null).transform);\r\n    let matrix={\r\n      ...this.state.addImagesMatrix,\r\n    };\r\n    if (t) {\r\n      t.splice(0,1);\r\n      matrix=[]\r\n      for (let i = 0; i < t.length; i++) {\r\n        matrix.push(t[i])\r\n      }\r\n    }\r\n\r\n    let bounds=params.target.getBoundingClientRect();\r\n    bounds={\r\n      x:(bounds.x)/this.props.geom.scale-this.props.geom.x,\r\n      y:(bounds.y-this.props.geom.offsetY)/this.props.geom.scale-this.props.geom.y,\r\n      width:bounds.width/this.props.geom.scale,\r\n      height:bounds.height/this.props.geom.scale,\r\n    }\r\n\r\n    let transform={\r\n      ...this.state.addImagesTransform[index],\r\n    }\r\n\r\n    this.currentZ++;\r\n    this.targetZs[index]=this.currentZ;\r\n\r\n    this.store.dispatch(\r\n      updateImage(index,transform,matrix,bounds)\r\n    )\r\n\r\n  }\r\n\r\n\r\n  render() {\r\n\r\n    let children = [];\r\n    children.push(this.props.children);\r\n\r\n    if (this.state.addImagesSrc) {\r\n\r\n      let indexes=[]\r\n      for (let i = 0; i < this.state.addImagesSrc.length; i++) {\r\n        indexes.push({i,z:this.targetZs[i]});\r\n      }\r\n      indexes.sort((a,b)=>{return a.z-b.z});\r\n\r\n      for (let ii = 0; ii < indexes.length; ii++) {\r\n        let i=indexes[ii].i;\r\n        let imageSrc = this.state.addImagesSrc[i];\r\n        let addImageTransform = this.state.addImagesTransform[i];\r\n        let addImageMatrix = this.state.addImagesMatrix[i];\r\n        let addImageBounds = this.state.addImagesBounds[i];\r\n\r\n        if (addImageTransform&&addImageMatrix&&addImageBounds) {\r\n\r\n          children.push(\r\n            <img\r\n              id={\"img\"+i}\r\n              key={\"img\"+i}\r\n              src={imageSrc}\r\n              className=\"editorImage\"\r\n              ref={this.targetRefs[i]}\r\n              style={{\r\n                transform:`matrix(${addImageMatrix})`,\r\n                width:this.state.addImagesDefaultSize.width,\r\n                height:this.state.addImagesDefaultSize.height,\r\n              }}\r\n              onLoad={this.movable_transformEndHandler}\r\n              onMouseDown={this.movable_transformEndHandler}\r\n            />\r\n          );\r\n\r\n          // children.push(\r\n          //   <div\r\n          //     id={\"tst\"+i}\r\n          //     key={\"tst\"+i}\r\n          //     style={{\r\n          //       position:\"absolute\",\r\n          //       display:\"block\",\r\n          //       width:addImageBounds.width+\"px\",\r\n          //       height:addImageBounds.height+\"px\",\r\n          //       left:addImageBounds.x+\"px\",\r\n          //       top:addImageBounds.y+\"px\",\r\n          //       background:\"#000\",\r\n          //       pointerEvents:\"none\",\r\n          //       opacity:0.2,\r\n          //     }}\r\n          //   />\r\n          // );\r\n          //\r\n          // console.log(`translate(${addImageTransform.x}px,${addImageTransform.y}px) rotate(${addImageTransform.rotation}deg) scale(${addImageTransform.scale})`);\r\n          //\r\n          // children.push(\r\n          //   <div\r\n          //     id={\"trt\"+i}\r\n          //     key={\"trt\"+i}\r\n          //     style={{\r\n          //       position:\"absolute\",\r\n          //       display:\"block\",\r\n          //       transform:`translate(${addImageTransform.x}px,${addImageTransform.y}px) rotate(${addImageTransform.rotation}deg) scale(${addImageTransform.scale})`,\r\n          //       width:this.state.addImagesDefaultSize.width,\r\n          //       height:this.state.addImagesDefaultSize.height,\r\n          //       background:\"#ff0000\",\r\n          //       pointerEvents:\"none\",\r\n          //       opacity:0.3,\r\n          //     }}\r\n          //   />\r\n          // );\r\n          if (!this.state.justAdded) {\r\n          children.push(\r\n            <Moveable\r\n              key={\"Moveable\"+i}\r\n              ref={this.moveableRefs[i]}\r\n              target={this.targetRefs[i].current}\r\n              pinchThreshold={20}\r\n              container={this.containerRef.current}\r\n              draggable={true}\r\n              scalable={true}\r\n              resizable={false}\r\n              warpable={false}\r\n              rotatable={true}\r\n              pinchable={false}\r\n              keepRatio={true}\r\n              origin={false}\r\n              throttleDrag={1.5}\r\n              throttleRotate={0.2}\r\n              throttleResize={1}\r\n              throttleScale={0.01}\r\n              onDrag={this.movable_transformHandler}\r\n              onResize={this.movable_transformHandler}\r\n              onScale={this.movable_transformHandler}\r\n              onWarp={this.movable_transformHandler}\r\n              onRotate={this.movable_transformHandler}\r\n              onPinch={this.movable_transformHandler}\r\n              onDragEnd={this.movable_transformEndHandler}\r\n              onScaleEnd={this.movable_transformEndHandler}\r\n              onResizeEnd={this.movable_transformEndHandler}\r\n              onWarpEnd={this.movable_transformEndHandler}\r\n              onRotateEnd={this.movable_transformEndHandler}\r\n              onPinchEnd={this.movable_transformEndHandler}\r\n            />\r\n          )\r\n          }\r\n\r\n        }\r\n      }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    return React.createElement(\r\n      'div',\r\n      { id:'Editor',\r\n        style:this.props.style,\r\n        ref:this.containerRef,\r\n      },\r\n      children\r\n      );\r\n  }\r\n}\r\n\r\nexport default Editor;\r\n","import React, { Component } from 'react';\r\nimport Editor from './Editor.js'\r\n\r\nclass EditorPlace extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.store = this.props.store;\r\n\r\n    this.ref=React.createRef()\r\n    this.containerRef=React.createRef()\r\n    this.editorRef=React.createRef()\r\n\r\n\r\n    this.state={\r\n      editorScale:.15,\r\n      editorX:0,\r\n      editorY:0,\r\n\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.unsubscribe=this.store.subscribe(()=>{this.onStoreChange()});\r\n    this.mounted=true;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.unsubscribe) {\r\n      this.unsubscribe();\r\n    }\r\n    this.mounted=false;\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState, snapshot) {\r\n    this.updateBounds(this.ref.current.clientWidth,this.ref.current.clientHeight);\r\n  }\r\n\r\n  onStoreChange() {\r\n    if (this.mounted) {\r\n      let state=this.store.getState();\r\n      this.setState({\r\n        ...this.state,\r\n        ...state,\r\n      });\r\n    }\r\n  }\r\n\r\n  updateBounds(width,height) {\r\n    if ((this.lastWidth!==width)||(this.lastHeight!==height)) {\r\n      if (this.state.editorBounds) {\r\n        this.lastWidth=width;\r\n        this.lastHeight=height;\r\n        let bounds=this.state.editorBounds;\r\n        let editorScale=Math.min(width/bounds.width,height/bounds.height);\r\n        let editorX=(width-bounds.width*editorScale)/2/editorScale;\r\n        let editorY=(height-bounds.height*editorScale)/2/editorScale;\r\n        this.setState({\r\n          ...this.state,\r\n          editorScale,\r\n          editorX,\r\n          editorY,\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n\r\n    let children = [];\r\n    children.push(this.props.children);\r\n\r\n    let offsetY=0;\r\n    if (this.ref.current) {\r\n      offsetY=this.ref.current.getBoundingClientRect().y;\r\n    }\r\n\r\n    let geom={\r\n      scale:this.state.editorScale,\r\n      x:this.state.editorX,\r\n      y:this.state.editorY,\r\n      offsetY,\r\n    }\r\n    \r\n    children.push(\r\n      <div\r\n        id=\"EditorContainer\"\r\n        key=\"EditorContainer\"\r\n        ref={this.containerRef}\r\n        style={{\r\n          width:(this.state.editorBounds)?this.state.editorBounds.width:0,\r\n          height:(this.state.editorBounds)?this.state.editorBounds.height:0,\r\n          transform:`scale(${this.state.editorScale}) translateX(${this.state.editorX}px) translateY(${this.state.editorY}px)`\r\n        }}\r\n      >\r\n        <Editor\r\n          id=\"Editor\"\r\n          key=\"Editor\"\r\n          scale={this.state.editorScale}\r\n          store={this.props.store}\r\n          ref={this.editorRef}\r\n          geom={geom}\r\n          style={{\r\n            width:(this.state.editorBounds)?this.state.editorBounds.width:0,\r\n            height:(this.state.editorBounds)?this.state.editorBounds.height:0,\r\n          }}\r\n        />\r\n        <img\r\n          id=\"MainImage\"\r\n          key=\"MainImage\"\r\n          src={this.state.mainImageSrc}\r\n        />\r\n      </div>\r\n    );\r\n\r\n    return React.createElement(\r\n      'div',\r\n      { id:'EditorPlace',\r\n        style:this.props.style,\r\n        ref:this.ref,\r\n      },\r\n      children\r\n      );\r\n  }\r\n}\r\n\r\nexport default EditorPlace;\r\n","import React, { Component } from 'react';\r\n\r\nimport TopMenu from '../components/TopMenu.js';\r\nimport SideMenu from '../components/SideMenu.js';\r\nimport EditorPlace from '../components/EditorPlace.js';\r\n\r\nclass Container extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {}\r\n    this.store = this.props.store;\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.unsubscribe=this.store.subscribe(()=>{this.onStoreChange()});\r\n    this.mounted=true;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.unsubscribe) {\r\n      this.unsubscribe();\r\n    }\r\n    this.mounted=false;\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState, snapshot) {\r\n  }\r\n\r\n  onStoreChange() {\r\n    if (this.mounted) {\r\n      let state=this.store.getState();\r\n      this.setState(state);\r\n    }\r\n  }\r\n\r\n  render() {\r\n\r\n    let children = [];\r\n    children.push(this.props.children);\r\n\r\n    children.push(\r\n      <SideMenu\r\n        store={this.store}\r\n        key=\"SideMenu\"\r\n        style={{\r\n          width:(this.state.sideMenu)?this.state.sideMenu.width:0,\r\n          top:(this.state.topMenu)?this.state.topMenu.height:0,\r\n        }}\r\n      />\r\n    );\r\n\r\n    children.push(\r\n      <EditorPlace\r\n        store={this.store}\r\n        key=\"EditorPlace\"\r\n        style={{\r\n          right:(this.state.sideMenu)?this.state.sideMenu.width:0,\r\n          top:(this.state.topMenu)?this.state.topMenu.height:0,\r\n        }}\r\n      />\r\n    );\r\n\r\n    children.push(\r\n      <TopMenu\r\n        store={this.store}\r\n        key=\"TopMenu\"\r\n        style={{\r\n          height:(this.state.topMenu)?this.state.topMenu.height:0,\r\n        }}\r\n      />\r\n    );\r\n\r\n    return React.createElement(\r\n      'div',\r\n      { id:'Container',\r\n      },\r\n      children\r\n      );\r\n  }\r\n}\r\n\r\n// export default connect(\r\n//   null,\r\n//   null\r\n// )(Container);\r\n\r\nexport default Container;\r\n","import { Component } from 'react';\r\n\r\nimport { setStorageData, storageDataSaved } from '../actions/appActions';\r\n\r\n// import LocalStorageManager from './LocalStorageManager';\r\n\r\nclass DataManager extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.store = this.props.store;\r\n    this.state = {\r\n      isLoading:false,\r\n      isLoaded:false,\r\n    }\r\n    this.loader=null;\r\n    this.result=null;\r\n\r\n  }\r\n\r\n/* ++++ React methods ++++ */\r\n\r\n  componentDidMount() {\r\n    this.unsubscribe=this.store.subscribe(()=>{this.onStoreChange()});\r\n    // this.load();\r\n    this.mounted=true;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.unsubscribe) {\r\n      this.unsubscribe();\r\n    }\r\n    this.mounted=false;\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n  }\r\n\r\n  onStoreChange() {\r\n    if (this.mounted) {\r\n      let state=this.store.getState();\r\n      // this.setState(state);\r\n      if (state.reloadData) {\r\n        // console.log(\"DataManager reloadData\");\r\n        // this.load()\r\n      } else\r\n      if (state.saveStorageData) {\r\n        // console.log(\"DataManager saveStorageData\");\r\n        this.saveStorageData();\r\n      }\r\n    }\r\n  }\r\n\r\n  loadStorageData()\r\n  {\r\n    let data=this.localStorageManager.load();\r\n    this.store.dispatch(\r\n      setStorageData(data)\r\n    );\r\n  }\r\n\r\n  saveStorageData()\r\n  {\r\n    // let state=this.store.getState();\r\n    this.localStorageManager.save({\r\n    });\r\n\r\n    this.store.dispatch(\r\n      storageDataSaved()\r\n    );\r\n  }\r\n\r\n  render () {\r\n    return null;\r\n  }\r\n\r\n}\r\nexport default DataManager;\r\n","import { Component } from 'react';\r\n\r\nimport {\r\n  reloadStoreData,\r\n  saveStorageData,\r\n  reinitMovable,\r\n  clearAction,\r\n } from '../actions/appActions';\r\n\r\nclass Control extends Component {\r\n\r\n  //--------------------------------------------------------------------------\r\n\t//\r\n\t// Constructor\r\n\t//\r\n\t//--------------------------------------------------------------------------\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n    this.store = this.props.store;\r\n\r\n    this.actionMap={\r\n    }\r\n\r\n    this.appStartDelay=500;\r\n\r\n    // console.log(\"Control constructor\");\r\n\r\n  }\r\n\r\n\r\n  //--------------------------------------------------------------------------\r\n  //\r\n  // React methods\r\n  //\r\n  //--------------------------------------------------------------------------\r\n\r\n  componentDidMount() {\r\n    this.unsubscribe=this.store.subscribe(()=>{this.onStoreChange()});\r\n    this.mounted=true;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.unsubscribe) {\r\n      this.unsubscribe();\r\n    }\r\n    this.mounted=false;\r\n  }\r\n\r\n  //--------------------------------------------------------------------------\r\n  //\r\n  // Own methods\r\n  //\r\n  //--------------------------------------------------------------------------\r\n\r\n  onStoreChange() {\r\n    if (this.mounted) {\r\n\r\n      let state=this.store.getState();\r\n      // this.setState(state);\r\n\r\n      if (state.justAdded) {\r\n        this.loadTimeout=setTimeout(()=>{\r\n          this.store.dispatch(\r\n            reinitMovable()\r\n          );\r\n        }, 200);\r\n      }\r\n\r\n      if (state.action) {\r\n\r\n        this.store.dispatch(\r\n          clearAction()\r\n        );\r\n\r\n        switch (state.action) {\r\n\r\n          case \"next\": {\r\n            this.props.app.props.onNext(this.props.app);\r\n            break;\r\n          }\r\n\r\n          case \"prev\": {\r\n            this.props.app.props.onPrev(this.props.app);\r\n            break;\r\n          }\r\n\r\n          case \"save\": {\r\n            this.props.app.props.onSave(this.props.app);\r\n            break;\r\n          }\r\n\r\n          default:\r\n\r\n        }\r\n\r\n\r\n      }\r\n\r\n\r\n      //\r\n      //\r\n      // if (state.dataLoaded) {\r\n      //\r\n      //   // console.log(\"Control dataLoaded\",state.windowIsVisible);\r\n      //   if (state.windowIsVisible) {\r\n      //     // console.log(\"Control Wait for next load\");\r\n      //     this.store.dispatch(\r\n      //       waitingForReloadStoreData()\r\n      //     );\r\n      //     this.waitForReload();\r\n      //   } else {\r\n      //     // console.log(\"Tab is inactive. Do not load\");\r\n      //   }\r\n      //\r\n      // } else\r\n      // if (state.loadDataError) {\r\n      //   // console.log(\"Control loadDataError\");\r\n      //   this.store.dispatch(\r\n      //     reloadStoreData()\r\n      //   );\r\n      // } else\r\n      // }\r\n\r\n      if (state.dataForStorageChanged) {\r\n      // console.log(\"Control dataForStorageChanged\");\r\n        this.store.dispatch(\r\n          saveStorageData()\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  stopTimeout() {\r\n    if (this.loadTimeout) {\r\n      clearTimeout(this.loadTimeout)\r\n      this.loadTimeout=null;\r\n    }\r\n  }\r\n\r\n  waitForReload() {\r\n    // console.log(\"Control waitForReload\");\r\n    this.stopTimeout();\r\n\r\n    this.loadTimeout=setTimeout(()=>{\r\n      // console.log(\"Control Reload\");\r\n      this.store.dispatch(\r\n        reloadStoreData()\r\n      );\r\n    },this.store.reloadTimeout);\r\n\r\n  }\r\n\r\n\r\n\r\n  render () {\r\n    return null;\r\n  }\r\n\r\n}\r\n\r\nexport default Control;\r\n","import { isMobile,isLocal } from '../core/helpers';\r\n\r\nconst settings = {\r\n\r\n    assetsUrl: \".\",\r\n    localStoreName:\"appState_261020\",\r\n\r\n    isMobile:isMobile(),\r\n    isLocal:isLocal(),\r\n\r\n    topMenu:{\r\n      height:\"5%\",\r\n    },\r\n\r\n    sideMenu:{\r\n      width:\"10%\",\r\n    },\r\n\r\n    editorBounds:{\r\n      width:0,\r\n      height:0,\r\n    },\r\n\r\n    addImagesDefaultSize:{\r\n      width:500,\r\n      height:500,\r\n    },\r\n\r\n    addImagesDefaultScale:0.5,\r\n\r\n    mainImageSrc:\"\",\r\n    addImagesSrc:[\"\",\"\",\"\"],\r\n    addImagesMatrix:[null,null,null],\r\n    addImagesBounds:[null,null,null],\r\n    addImagesTransform:[null,null,null],\r\n\r\n    title:\"\",\r\n}\r\n\r\nexport default settings;\r\n","import MobileDetect from 'mobile-detect'\r\nimport path from \"path\"\r\n\r\nexport const callLater = (callback,delay = 100) => {\r\n  return setTimeout(callback,delay);\r\n}\r\n\r\nexport const isMobile = () => {\r\n  var mobileDetect = new MobileDetect(window.navigator.userAgent);\r\n  return mobileDetect.mobile();\r\n}\r\n\r\nexport const isLocal = () => {\r\n  return !(/^h/.test(document.location.toString()));\r\n}\r\n\r\nexport const objectIsEmpty = (object) => {\r\n  return Object.keys(object).length === 0 && object.constructor === Object;\r\n}\r\n\r\nexport const correctUrl = (url,assetsUrl) => {\r\n\r\n  if (url) {\r\n    if (url.substr(0,1)===\"/\") {\r\n      if (!assetsUrl) {\r\n        assetsUrl=\".\";\r\n      }\r\n      url=path.join(assetsUrl,url);\r\n    }\r\n  }\r\n\r\n  return url;\r\n\r\n}\r\n\r\nexport const openLink = (link) => {\r\n  // let url=correctUrl(link)\r\n  // console.log(\"??\",url);\r\n  window.open(link,\"_blank\")\r\n}\r\n\r\nexport const formatWeight = (weight) => {\r\n  if (weight==null) {\r\n    return \"--Кб\"\r\n  }\r\n\r\n  weight=Number(weight)\r\n  let output=\"\"\r\n\r\n  if (weight>=1000000) {\r\n    output=Math.round(weight*100/1000000)/100+\"Мб\";\r\n  } else\r\n  if (weight>=1000) {\r\n    output=Math.round(weight*100/1000)/100+\"Kб\";\r\n  } else {\r\n    output=weight+\"б\";\r\n  }\r\n  return output\r\n}\r\n\r\nexport const exportCreatives = (creatives,passStatus) => {\r\n  let creativeList=[];\r\n  for (let name in creatives) {\r\n    let creative=creatives[name];\r\n    creativeList.push(creative);\r\n  }\r\n\r\n  creativeList.sort((a,b)=>{\r\n    if (a.section>b.section) return 1;\r\n    if (a.section<b.section) return -1;\r\n\r\n    if (a.publisher>b.publisher) return 1;\r\n    if (a.publisher<b.publisher) return -1;\r\n\r\n    if (a.formatName>b.formatName) return 1;\r\n    if (a.formatName<b.formatName) return -1;\r\n\r\n    if (a.feed>b.feed) return 1;\r\n    if (a.feed<b.feed) return -1;\r\n\r\n    if (a.updateTime>b.updateTime) return 1;\r\n    return -1;\r\n  });\r\n\r\n  let data=[]\r\n  data.push(\r\n    [\r\n      { value:\"Раздел\", type:\"string\" },\r\n      { value:\"Площадка\", type:\"string\" },\r\n      { value:\"Платформа\", type:\"string\" },\r\n      { value:\"Формат\", type:\"string\" },\r\n      { value:\"Фид\", type:\"string\" },\r\n      { value:\"Статус\", type:\"string\" },\r\n      { value:\"Рецензия\", type:\"string\" },\r\n    ]\r\n  );\r\n\r\n  for (let i = 0; i < creativeList.length; i++) {\r\n    let creative=creativeList[i];\r\n    data.push(\r\n      [\r\n        { value:creative.section, type:\"string\" },\r\n        { value:creative.publisher, type:\"string\" },\r\n        { value:creative.platform, type:\"string\" },\r\n        { value:creative.formatName, type:\"string\" },\r\n        { value:creative.feed, type:\"string\" },\r\n        { value:creative.state, type:\"string\" },\r\n        { value:passStatus[creative.name]?\"Принят\":\"Не принят\", type:\"string\" },\r\n      ]\r\n    );\r\n  }\r\n\r\n  return data;\r\n}\r\n","import React, { Component } from 'react';\n\nimport mainReducer from './reducers/mainReducer'\nimport Container from './core/Container';\n\nimport DataManager from './core/DataManager';\nimport Control from './core/Control';\n\nimport { Provider } from 'react-redux'\nimport { createStore } from 'redux'\n\nimport { appInit, setStoreData } from './actions/appActions';\n\nimport settings from './configuration/Settings';\n\nimport './css/app.css';\n\nconst Store = createStore(\n  mainReducer,\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\n);\n\nclass App extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {}\n\n    this.initHandler=this.initHandler.bind(this);\n    this.resizeHandler=this.resizeHandler.bind(this);\n  }\n\n  updateLayout() {\n    let windowInnerWidth=document.documentElement.clientWidth || document.body.clientWidth || window.innerWidth;\n    let windowInnerHeight=document.documentElement.clientHeight || document.body.clientHeight || window.innerHeight;\n\n    this.setState({\n      ...this.state,\n      windowWidth:windowInnerWidth,\n      windowHeight:windowInnerHeight,\n    });\n\n  }\n\n  initHandler(event) {\n    this.updateLayout();\n  }\n\n  resizeHandler(event) {\n    this.updateLayout();\n  }\n\n  setData(data) {\n    Store.dispatch(\n      setStoreData(data)\n    );\n  }\n\n  getData(data) {\n    return Store.getState();\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n  }\n\n  componentDidMount() {\n    Store.dispatch(\n      appInit(settings)\n    );\n\n    window.addEventListener(\"load\",this.initHandler);\n    window.addEventListener(\"resize\",this.resizeHandler);\n\n    // window.editorApp=this;\n    // if (window.onEditorAppReady) {\n    //   window.onEditorAppReady(this);\n    // }\n\n    this.props.onInit(this);\n\n  }\n\n  render() {\n    return (\n      <Provider store={Store}>\n        <Container\n          id=\"Container\"\n          windowWidth={this.state.windowWidth}\n          windowHeight={this.state.windowHeight}\n          store={Store}\n        >\n          <DataManager\n            store={Store}\n          />\n          <Control\n            app={this}\n            store={Store}\n          />\n        </Container>\n      </Provider>\n    );\n  }\n\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nlet element=document.getElementById('editorWidget');\n\nconsole.log(element.getAttribute(\"oninit\"));\n\nReactDOM.render(\n  <React.StrictMode>\n    <App\n      id=\"editorApp\"\n      onInit={window[element.getAttribute(\"oninit\")]}\n      onNext={window[element.getAttribute(\"onnext\")]}\n      onPrev={window[element.getAttribute(\"onprev\")]}\n    />\n  </React.StrictMode>,\n  element\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}